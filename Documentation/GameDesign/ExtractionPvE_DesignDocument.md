# Extraction PvE: "Почтовый-47"

## Концепция

Альтернативная реальность, где СССР не распался, а застыл в вечном "золотом застое" — технократической системе контроля. Игрок — Курьер, носящий чужие воспоминания через закрытый город Почтовый-47. Атмосфера вдохновлена "Бегущим по лезвию 2049": вечный снег, созерцательная меланхолия, красота в распаде, вопросы о природе памяти и идентичности.

Задача: проникать в охраняемые зоны, добывать запрещённые ресурсы, избегать патрулей и систем наблюдения, выбираться через подпольные каналы. Каждый рейд — баланс между жадностью, скрытностью и выживанием.

**Сеттинг**: Почтовый-47 — закрытый город в Сибири, где сорок лет идёт снег. Советский брутализм встречает вечную зиму: панельные дома, промзоны, теплотрассы под землёй. Визуальная эстетика "Бегущего по лезвию 2049" + геймплей Escape from Tarkov + атмосфера S.T.A.L.K.E.R.

**Ключевые элементы сеттинга**:
- **Тотальный контроль**: Камеры наблюдения, сканеры документов, дроны-разведчики
- **Силы режима**: Полиция в тяжёлой броне, боевые роботы, автоматизированные турели
- **Советская эстетика**: Панельные дома, промзоны, пропагандистские плакаты — но с технологиями будущего
- **Сопротивление**: Подпольные сети, контрабандисты, хакеры-диссиденты

**Целевая платформа**: Unreal Engine 5.7 (без World Partition)

---

## Core Loop (Основной Цикл)

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           УБЕЖИЩЕ (Hideout)                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐         │
│  │     Схрон       │  │    Верстак      │  │    Торговец     │         │
│  │    (Stash)      │  │   (Workbench)   │  │    (Trader)     │         │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘         │
└───────────────────────────────┬─────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                         DEPLOYMENT (Выход на рейд)                      │
│  - Выбор локации (риск/награда)                                         │
│  - Подготовка снаряжения                                                │
│  - Выбор точки входа                                                    │
└───────────────────────────────┬─────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                            RAID (Рейд)                                  │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │ EXPLORATION ──► COMBAT ──► LOOT ──► EXTRACTION                   │  │
│  │      │            │          │           │                        │  │
│  │      ▼            ▼          ▼           ▼                        │  │
│  │  Skill XP    Weapon XP   Resources   Survival Bonus              │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  УГРОЗЫ:                            НАГРАДЫ:                            │
│  - Полиция режима (Смотрительы)       - Редкое оружие                    │
│  - Боевые роботы                    - Модификации                       │
│  - Дроны-разведчики                 - Медикаменты                       │
│  - Камеры и турели                  - Материалы для крафта              │
│  - Патрули и блокпосты              - Запрещённые технологии            │
└───────────────────────────────┬─────────────────────────────────────────┘
                                │
                    ┌───────────┴───────────┐
                    ▼                       ▼
            ┌─────────────┐         ┌─────────────┐
            │  EXTRACTED  │         │    DEAD     │
            │  (Выжил)    │         │  (Погиб)    │
            ├─────────────┤         ├─────────────┤
            │ Keep Loot   │         │ Lose Loot   │
            │ Keep XP     │         │ Keep XP*    │
            │ Gear Damage │         │ Lose Gear   │
            └─────────────┘         └─────────────┘
                    │                       │
                    └───────────┬───────────┘
                                ▼
                        [Return to Hideout]
```

---

## Level Architecture (UE 5.7 без World Partition)

### Архитектура уровней

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    LEVEL ARCHITECTURE (No World Partition)               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  Persistent Level: L_GameMode (минимальный - только GameMode/Spawns)    │
│       │                                                                  │
│       ├─► L_Hub_Bunker      (загружен при старте, ~100x100м)            │
│       │   (Бункер сопротивления)                                        │
│       │                                                                  │
│       ├─► L_Raid_Outskirts  (стримится при входе в рейд, ~400x400м)     │
│       │   (Окраина сектора - жилые кварталы под контролем)              │
│       │                                                                  │
│       └─► L_Raid_Industrial (стримится при входе в рейд, ~350x350м)     │
│           (Промзона - заброшенный завод, меньше патрулей)               │
│                                                                          │
│  Level Streaming: LoadStreamLevel при выборе рейда                      │
│  Unload: UnloadStreamLevel при возврате в Hub                           │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Размеры локаций (Demo)

| Локация | Уровень | Размер | Время рейда | Стиль |
|---------|---------|--------|-------------|-------|
| **Бункер (Убежище)** | `L_Hub_Bunker` | 100x100м | - | Interior, безопасная зона сопротивления |
| **Окраина** | `L_Raid_Outskirts` | 400x400м | 15-25 мин | Жилые кварталы + камеры/патрули |
| **Промзона** | `L_Raid_Industrial` | 350x350м | 20-30 мин | Заброшенный завод, роботы, турели |

### Level Streaming Implementation

```cpp
// В GameMode или RaidManager
UCLASS()
class URaidLevelManager : public UObject
{
    GENERATED_BODY()

public:
    UFUNCTION(BlueprintCallable, Category = "Raid")
    void LoadRaidLevel(ERaidLocation Location)
    {
        // Выгрузить бункер сопротивления
        FLatentActionInfo UnloadInfo;
        UnloadInfo.CallbackTarget = this;
        UnloadInfo.ExecutionFunction = "OnBunkerUnloaded";
        UnloadInfo.Linkage = 0;
        UnloadInfo.UUID = GetUniqueID();

        UGameplayStatics::UnloadStreamLevel(
            GetWorld(),
            FName("L_Hub_Bunker"),
            UnloadInfo,
            false
        );

        // Загрузить рейд
        FString LevelName = GetLevelNameForLocation(Location);
        FLatentActionInfo LoadInfo;
        LoadInfo.CallbackTarget = this;
        LoadInfo.ExecutionFunction = "OnRaidLoaded";
        LoadInfo.Linkage = 1;
        LoadInfo.UUID = GetUniqueID();

        UGameplayStatics::LoadStreamLevel(
            GetWorld(),
            FName(*LevelName),
            true,  // bMakeVisibleAfterLoad
            true,  // bShouldBlockOnLoad
            LoadInfo
        );
    }

    UFUNCTION(BlueprintCallable, Category = "Raid")
    void ReturnToBunker()
    {
        // Выгрузить текущий рейд, загрузить бункер сопротивления
        // Аналогичная логика
    }

private:
    FString GetLevelNameForLocation(ERaidLocation Location)
    {
        switch (Location)
        {
            case ERaidLocation::Outskirts:  return TEXT("L_Raid_Outskirts");
            case ERaidLocation::Industrial: return TEXT("L_Raid_Industrial");
            default: return TEXT("");
        }
    }
};
```

---

## Локация: БУНКЕР СОПРОТИВЛЕНИЯ (Hub)

### Описание

Подземное убежище подпольной сети — бывший командный пункт гражданской обороны, переоборудованный в базу операций. Стены покрыты картами секторов, мерцают старые мониторы с перехваченными передачами режима, в углу тихо гудит генератор. Здесь можно восстановить силы, подготовить снаряжение и получить новые задания от координаторов сопротивления.

### Layout

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     БУНКЕР СОПРОТИВЛЕНИЯ                                │
│                       L_Hub_Bunker (~100x100м)                          │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │                  Подземный командный пункт (Interior)             │   │
│  │                                                                   │   │
│  │   ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐            │   │
│  │   │  СХРОН  │  │ ВЕРСТАК │  │БАРАХОЛЬЩИК│ │ОПЕРАТИВНАЯ│           │   │
│  │   │ (Stash) │  │(Repairs)│  │ (Trade)  │ │  КАРТА   │            │   │
│  │   └─────────┘  └─────────┘  └─────────┘  └─────────┘            │   │
│  │                                                                   │   │
│  │   ┌─────────┐  ┌─────────┐  ┌───────────────────────┐            │   │
│  │   │ НАРЫ    │  │ РАДИСТ  │  │   ШЛЮЗ ВЫХОДА         │            │   │
│  │   │(Save/   │  │(Info/   │  │  (Loadout + Deploy)   │            │   │
│  │   │ Rest)   │  │ Quests) │  │                       │            │   │
│  │   └─────────┘  └─────────┘  └───────────────────────┘            │   │
│  │                                                                   │   │
│  │   [Мониторы с камерами секторов]    [Пропагандистские радиопомехи]│   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Функции бункера

| Зона | Функционал | Реализация |
|------|------------|------------|
| **Схрон** | Grid-инвентарь для хранения добычи | Существующая система инвентаря |
| **Верстак** | Ремонт оружия, модификации, взлом электроники | Durability system + Crafting UI |
| **Барахольщик** | Покупка/продажа контрабанды | NPC + Trade Widget |
| **Оперативная карта** | Выбор сектора для рейда, данные разведки | Mission Board UI с камерами |
| **Нары** | Сохранение прогресса, восстановление | Save/Load + Rest mechanic |
| **Радист** | Квесты от сопротивления, информация о режиме | Quest NPC + Intel system |
| **Шлюз выхода** | Подготовка снаряжения перед выходом | Equipment Widget перед deploy |

### Освещение бункера

```
Освещение Hub (атмосфера подполья):
├── Baked Lighting (Static) — приглушённый, угнетающий
├── Аварийное освещение (красные лампы)
├── Мерцающие мониторы и экраны
├── Volumetric Fog для атмосферы подземелья
├── Неоновые индикаторы оборудования
└── Emissive materials для карт и экранов слежения
```

---

## Локация: ОКРАИНА (L_Raid_Outskirts)

### Описание

Жилой сектор на периферии города под полным контролем режима. Панельные дома советской эпохи соседствуют с пропагандистскими экранами и камерами на каждом углу. Здесь живут "лояльные граждане", но в подвалах и на чердаках прячутся схроны контрабандистов. Патрули полиции режима постоянно курсируют по улицам, дроны-разведчики осматривают дворы.

### Overview

| Параметр | Значение |
|----------|----------|
| **Размер** | 400x400 метров |
| **Время рейда** | 15-25 минут |
| **Сложность** | Tier 1 (Low-Medium) |
| **Стиль** | Жилые кварталы + системы наблюдения |
| **Вертикальность** | Средняя (2-3 этажа) |
| **Особенность** | Высокая плотность камер, частые патрули |

### Layout

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         ОКРАИНА - Layout                                 │
│                    Почтовый-47В (~400x400 метров)                          │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   [SPAWN A]                                      [SPAWN B]               │
│   (канализация)                                  (чердак)                │
│      ↓                                              ↓                    │
│  ┌────────┐         ┌──────────────┐         ┌────────┐                 │
│  │Гаражи  │─────────│ Остановка ОТ │─────────│Общежитие│                │
│  │(схрон) │ 📷      │  (камеры!)   │   📷    │(3 этажа)│                │
│  └────────┘         └──────────────┘         └────────┘                 │
│      │                     │                      │                      │
│      │    ┌────────────────┼────────────────┐    │                      │
│      │    │       🚁       │       🚁       │    │                      │
│      ▼    ▼    (дроны)     ▼    (дроны)     ▼    ▼                      │
│  ┌────────────┐    ┌──────────────┐    ┌────────────┐                   │
│  │ Двор с     │    │   Площадь    │    │  Магазин   │                   │
│  │ помойкой   │    │  с монументом│ 📷 │ "Продукты" │                   │
│  └────────────┘    └──────────────┘    └────────────┘                   │
│        │                   │                  │                          │
│        │         ┌─────────┴─────────┐       │                          │
│        │         │     ПАТРУЛЬ       │       │                          │
│        ▼         ▼                   ▼       ▼                          │
│  ┌──────────┐ ┌────────┐      ┌────────┐ ┌──────────┐                   │
│  │Техколлект│ │ Тоннель│      │  КПП   │ │Заправка  │                   │
│  │(extract) │ │(shortcut)     │(extract)│ │(турель!) │                   │
│  └──────────┘ └────────┘      └────────┘ └──────────┘                   │
│                                                                          │
│  [EXTRACT 1]              [EXTRACT 2]                                   │
│  (мусоровоз)              (подкуп охраны)                               │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘

Легенда:
━━━━━━━━
- Spawn A/B: Точки входа через подпольные каналы
- Extract 1/2: Точки эвакуации (1-2 активны за рейд)
- 📷 - Камеры наблюдения (можно отключить/обойти)
- 🚁 - Зоны патрулирования дронов
- Центральные зоны: Больше лута, больше охраны
- Периферия: Меньше патрулей, меньше добычи
```

### Points of Interest (POI)

| POI | Описание | Лут | Угрозы | Вертикаль |
|-----|----------|-----|--------|-----------|
| **Остановка ОТ** | Центр карты, 2 этажа + крыша | High (редкие патроны) | 2 камеры, патруль 3-4 | 3 уровня |
| **Общежитие** | 3-этажное здание, схроны на чердаке | Medium-High (медицина) | 1 камера/этаж, 2 полицейских | 3 этажа |
| **Гаражи** | Боксы с машинами, схрон контрабанды | Medium (инструменты, детали) | 1 камера, периодический дрон | Нет |
| **Магазин "Продукты"** | Советский магазин, всё по талонам | Medium (медицина, еда) | 2 камеры, 1 охранник | Нет |
| **Заправка** | АЗС с мини-маркетом | Medium (расходники) | 1 автотурель, 1 камера | Нет |
| **Площадь с монументом** | Открытая зона, памятник Вождю | Low (но ценные документы) | Постоянный патруль 2-3, дрон | Нет |
| **Техколлектор** | Extraction point #1, мусоровоз | Low | Периодический патруль | Нет |
| **КПП** | Extraction point #2, подкуп возможен | Low-Medium | 2-3 полицейских, 1 сканер | Вышка |
| **Тоннель** | Подземный переход (shortcut) | Low | Нет камер, 1 датчик движения | Подземный |
| **Двор с помойкой** | Дворик между домами, свалка | Low | Периодический дрон | Нет |

### Задачи на локации

```cpp
// Типы заданий для Окраины — Почтовый-47В
UENUM(BlueprintType)
enum class EOutskirtsObjective : uint8
{
    // === ОСНОВНЫЕ (всегда доступны) ===
    Extract,              // Выжить и эвакуироваться незамеченным

    // === СБОР (рандом 1-2 за рейд) ===
    FindMedSupplies,      // Найти медикаменты в Магазине (3 шт)
    CollectElectronics,   // Собрать электронику для сопротивления (5 единиц)
    FindAmmoCache,        // Найти схрон с патронами в Гаражах
    StealRations,         // Украсть продовольственные талоны

    // === ДИВЕРСИИ (рандом 0-1 за рейд) ===
    DisableCameras,       // Отключить 3 камеры наблюдения
    DestroyDrone,         // Уничтожить дрон-разведчик
    HackTerminal,         // Взломать терминал на Остановке
    NeutralizePatrol,     // Нейтрализовать патруль (без тревоги!)

    // === РАЗВЕДКА (рандом 0-1 за рейд) ===
    PlaceJammer,          // Установить глушилку на крыше Остановки
    FindIntel,            // Найти документы режима в Общежитии
    MarkPatrolRoute,      // Отметить маршруты патрулей
    PhotographCheckpoint  // Сфотографировать КПП для сопротивления
};
```

### Прогрессия сложности по времени

```
┌────────────────────────────────────────────────────────────────┐
│              ОКРАИНА - Система тревоги и эскалации              │
├────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Время в рейде:     Уровень угрозы:   События:                 │
│                                                                 │
│  0-5 мин           ★☆☆☆☆  ЗЕЛЁНЫЙ    Стандартные патрули      │
│  5-10 мин          ★★☆☆☆  ЖЁЛТЫЙ     Активация доп. камер     │
│  10-15 мин         ★★★☆☆  ОРАНЖЕВЫЙ  Дроны усиливают патруль  │
│  15-20 мин         ★★★★☆  КРАСНЫЙ    Прибывает отряд ОМОНа    │
│  20+ мин           ★★★★★  ЛОКДАУН    Боевые роботы, блокировка │
│                                                                 │
│  Бонус за скрытность: +25% XP если не поднята тревога         │
│  Бонус за скорость:   +15% XP за эвакуацию <10 мин            │
│  Штраф за ЛОКДАУН:    Все выходы под усиленной охраной        │
│                                                                 │
└────────────────────────────────────────────────────────────────┘
```

### Система тревоги (Alert System)

```cpp
// Уровни тревоги в секторе
UENUM(BlueprintType)
enum class EAlertLevel : uint8
{
    Green,       // Норма — стандартные патрули
    Yellow,      // Подозрение — доп. камеры активны
    Orange,      // Тревога — дроны ищут нарушителя
    Red,         // Боевая тревога — ОМОН прибывает
    Lockdown     // Локдаун — боевые роботы, блокировка выходов
};

// Что поднимает тревогу:
// - Попадание на камеру: +1 уровень
// - Обнаружение дроном: +1 уровень
// - Выстрел без глушителя: +1 уровень
// - Убийство полицейского: +2 уровня
// - Взлом без скилла: шанс +1 уровень
```

### Spawns & Extraction

```cpp
// Spawn Points - рандомный выбор при старте рейда
UPROPERTY(EditAnywhere, Category = "Spawns")
TArray<FTransform> PlayerSpawnPoints;  // 2+ точек

// Extraction Points - 1-2 активны за рейд (рандом)
UPROPERTY(EditAnywhere, Category = "Extraction")
TArray<FExtractionPoint> ExtractionPoints;

USTRUCT(BlueprintType)
struct FExtractionPoint
{
    GENERATED_BODY()

    UPROPERTY(EditAnywhere)
    FTransform Location;

    UPROPERTY(EditAnywhere)
    FText DisplayName;  // "Свалка", "КПП"

    UPROPERTY(EditAnywhere)
    float ExtractionTime = 7.0f;  // Секунд для эвакуации

    UPROPERTY(EditAnywhere)
    bool bRequiresPayment = false;  // Некоторые точки платные

    UPROPERTY(EditAnywhere)
    int32 PaymentAmount = 0;
};
```

---

## Локация: ПРОМЗОНА (L_Raid_Industrial)

### Описание

Заброшенный машиностроительный завод — бывшая гордость советской индустрии, ныне закрытая зона. Режим объявил её "санитарной территорией", но на деле здесь расположен секретный склад конфискованного имущества и лаборатория. Охрана минимальна — в основном автоматизированные системы: турели, роботы-охранники, датчики движения. Меньше патрулей, но больше ловушек.

### Overview

| Параметр | Значение |
|----------|----------|
| **Размер** | 350x350 метров |
| **Время рейда** | 20-30 минут |
| **Сложность** | Tier 2 (Medium-High) |
| **Стиль** | Заброшенная индустрия + автоматическая охрана |
| **Вертикальность** | Высокая (краны, трубы, платформы) |
| **Особенность** | Меньше людей, больше роботов и турелей |

### Layout

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         ПРОМЗОНА - Layout                                │
│                    Завод "Красный Прогресс" (~350x350 м)                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   [SPAWN A]                                      [SPAWN B]               │
│   (пролом в заборе)                              (вентшахта)             │
│      ↓                                              ↓                    │
│  ┌──────────┐      ┌────────────────┐      ┌──────────┐                 │
│  │Ж/Д тупик │──────│  Главный цех   │──────│Котельная │                 │
│  │(вагоны)  │  🤖  │  (3 уровня)    │  🤖  │(трубы)   │                 │
│  └──────────┘      └────────────────┘      └──────────┘                 │
│       │                    │                     │                       │
│       │         ┌──────────┼──────────┐         │                       │
│       │         │   РОБОТ-ОХРАННИК    │         │                       │
│       ▼         ▼          ▼          ▼         ▼                       │
│  ┌─────────┐ ┌───────┐ ┌────────┐ ┌───────┐ ┌─────────┐                │
│  │Склад    │ │Крановая│ │Двор с  │ │Админ. │ │Гараж    │                │
│  │конфиск. │ │(высота)│ │техникой│ │(сейфы)│ │спецтехн.│                │
│  │(турель) │ └───────┘ └────────┘ └───────┘ └─────────┘                │
│  └─────────┘     │          │          │         │                       │
│       │          │    ┌─────┴─────┐    │         │                       │
│       ▼          ▼    ▼           ▼    ▼         ▼                       │
│  ┌─────────┐  ┌────────────┐  ┌────────────┐  ┌─────────┐              │
│  │Свалка   │  │ Лаборатория│  │ Подстанция │  │ Проходная│              │
│  │отходов  │  │   (секрет) │  │ (ловушки!) │  │(extract) │              │
│  │(extract)│  └────────────┘  └────────────┘  └─────────┘              │
│  └─────────┘                                                            │
│                                                                          │
│  [EXTRACT 1]                              [EXTRACT 2]                   │
│  (грузовик)                               (подкуп сторожа)              │
│                                                                          │
│  🤖 = Робот-охранник (маршрутный патруль)                               │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Points of Interest

| POI | Описание | Лут | Угрозы | Особенности |
|-----|----------|-----|--------|-------------|
| **Главный цех** | Огромный цех с 3 уровнями | Very High | 2 робота-охранника, 3 турели | Вертикальные бои, датчики |
| **Крановая** | Башня крана + мостовые краны | High (редкий) | 1 дрон-наблюдатель | Снайперская позиция |
| **Котельная** | Трубы, котлы, тёмные углы | Medium-High | 1 робот + датчики движения | Тесные пространства |
| **Склад конфиската** | Контейнеры с изъятым добром | High | 2 турели, 1 сторож | Засады, ловушки |
| **Админ. здание** | Офисы, сейфы с документами | High (ценности) | 1 камера/комнату, 1 охранник | Коды, ключи, взлом |
| **Ж/Д тупик** | Старые вагоны с грузом | Medium | Периодический дрон | Лут в вагонах |
| **Подстанция** | Высокое напряжение! | Very High | Электро-ловушки, датчик | Отключение питания? |
| **Лаборатория** | Секретный объект режима | Very High | 2 робота, биометрия | Редкие технологии |

### Уникальные механики Промзоны

```cpp
// Системы безопасности завода
USTRUCT(BlueprintType)
struct FIndustrialSecuritySystems
{
    GENERATED_BODY()

    // Электрические ловушки на Подстанции
    UPROPERTY(EditAnywhere)
    TArray<AElectricHazard*> ElectricHazards;

    // Автоматические турели
    UPROPERTY(EditAnywhere)
    TArray<AAutoTurret*> AutoTurrets;

    // Роботы-охранники (маршрутный патруль)
    UPROPERTY(EditAnywhere)
    TArray<AGuardRobot*> GuardRobots;

    // Датчики движения (активируют тревогу)
    UPROPERTY(EditAnywhere)
    TArray<AMotionSensor*> MotionSensors;

    // Биометрические замки
    UPROPERTY(EditAnywhere)
    TArray<ABiometricLock*> BiometricLocks;

    // Движущиеся краны (cover/опасность)
    UPROPERTY(EditAnywhere)
    TArray<AMovingCrane*> Cranes;

    // Главный рубильник (отключает часть систем)
    UPROPERTY(EditAnywhere)
    APowerSwitch* MainPowerSwitch;
};

// Отключение питания через Подстанцию даёт:
// - Турели неактивны на 2 минуты
// - Датчики отключены
// - Но роботы переходят в автономный режим!
```

---

## Equipment System (Система экипировки)

### Слоты снаряжения (Tarkov-style)

Система использует 17 слотов экипировки, определённых в `EEquipmentSlotType`:

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    EQUIPMENT SLOTS LAYOUT                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌─────────────────┐    ┌───────────┐ ┌────┐                            │
│  │ PRIMARY WEAPON  │    │ HEADWEAR  │ │EAR │   ← Шлем + Наушники        │
│  │   (5x2 cells)   │    │  (2x2)    │ │1x1 │                            │
│  │ AR/DMR/SR/LMG   │    └───────────┘ └────┘                            │
│  └─────────────────┘    ┌────┐ ┌────┐                                   │
│                         │EYE │ │FACE│       ← Очки + Балаклава          │
│  ┌──────────────┐       │1x1 │ │1x1 │                                   │
│  │SECONDARY WPN │       └────┘ └────┘                                   │
│  │  (4x2 cells) │                                                       │
│  │ SMG/PDW/SG   │       ┌──────────────┐ ┌─────────┐                    │
│  └──────────────┘       │  BODY ARMOR  │ │TACT.RIG │  ← Броня + Разгруз │
│                         │    (3x3)     │ │  (2x3)  │                    │
│  ┌────────┐ ┌────┐      └──────────────┘ └─────────┘                    │
│  │HOLSTER │ │SCAB│                                                      │
│  │ (2x2)  │ │1x2 │      ┌──────────────┐ ┌─────────┐ ┌────┐             │
│  │Pistol  │ │Knf │      │   BACKPACK   │ │ SECURE  │ │ARM │             │
│  └────────┘ └────┘      │    (3x3)     │ │  (2x2)  │ │BAND│             │
│                         └──────────────┘ └─────────┘ └────┘             │
│                                                                          │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐                                            │
│  │ Q1 │ │ Q2 │ │ Q3 │ │ Q4 │  ← Quick Slots (Consumable/Medical/Ammo)   │
│  └────┘ └────┘ └────┘ └────┘                                            │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Типы слотов и допустимые предметы

| Слот | Размер | Допустимые типы |
|------|--------|-----------------|
| **PrimaryWeapon** | 5x2 | AR, DMR, SR, Shotgun, LMG |
| **SecondaryWeapon** | 4x2 | SMG, PDW, Shotgun |
| **Holster** | 2x2 | Pistol, Revolver |
| **Scabbard** | 1x2 | Melee/Knife |
| **Headwear** | 2x2 | Helmet, Headwear |
| **Earpiece** | 1x1 | Earpiece (тактические наушники) |
| **Eyewear** | 1x1 | Eyewear (очки, визоры) |
| **FaceCover** | 1x1 | FaceCover (балаклава, респиратор) |
| **BodyArmor** | 3x3 | BodyArmor |
| **TacticalRig** | 2x3 | TacticalRig |
| **Backpack** | 3x3 | Backpack |
| **SecureContainer** | 2x2 | SecureContainer (сохраняется при смерти) |
| **QuickSlot 1-4** | 1x1 | Consumable, Medical, Throwable, Ammo |
| **Armband** | 1x1 | Armband (фракционная метка) |

---

## Weapon System (Система оружия)

### Доступное оружие

На основе `SuspenseCoreWeaponAttributes.json`:

| ID | Название | Тип | Калибр | Урон | ROF | Магазин |
|----|----------|-----|--------|------|-----|---------|
| `Weapon_AK74M` | **АК-74М** | Assault Rifle | 5.45x39mm | 42 | 650 | 30 |
| `Weapon_AK103` | **АК-103** | Assault Rifle | 7.62x39mm | 55 | 600 | 30 |
| `Weapon_SVD` | **СВД** | DMR | 7.62x54mmR | 86 | 120 | 10 |
| `Weapon_MP5SD` | **MP5SD** | SMG | 9x19mm | 35 | 800 | 30 |
| `Weapon_MP7A2` | **MP7A2** | PDW | 4.6x30mm | 30 | 950 | 40 |
| `Weapon_Glock17` | **Glock 17** | Pistol | 9x19mm | 35 | 450 | 17 |
| `Weapon_M9A3` | **Beretta M9A3** | Pistol | 9x19mm | 36 | 400 | 17 |
| `Weapon_M9Bayonet` | **Штык-нож M9** | Melee | - | 45 | 80 | - |

### Характеристики оружия

```
┌──────────────────────────────────────────────────────────────────────────┐
│                    WEAPON ATTRIBUTES                                      │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                           │
│  BaseDamage         - Базовый урон                                       │
│  RateOfFire         - Скорострельность (выстр/мин)                       │
│  EffectiveRange     - Эффективная дальность (м)                          │
│  MaxRange           - Максимальная дальность (м)                         │
│  MagazineSize       - Ёмкость магазина                                   │
│  TacticalReloadTime - Перезарядка с патроном в патроннике (сек)          │
│  FullReloadTime     - Полная перезарядка (сек)                           │
│  MOA                - Точность (меньше = лучше)                          │
│  HipFireSpread      - Разброс при стрельбе от бедра                      │
│  AimSpread          - Разброс при прицеливании                           │
│  VerticalRecoil     - Вертикальная отдача                                │
│  HorizontalRecoil   - Горизонтальная отдача                              │
│  Durability         - Текущая прочность (0-100)                          │
│  MaxDurability      - Максимальная прочность                             │
│  MisfireChance      - Шанс осечки                                        │
│  JamChance          - Шанс заклинивания                                  │
│  Ergonomics         - Эргономика (влияет на ADS speed)                   │
│  AimDownSightTime   - Время прицеливания (сек)                           │
│  WeaponWeight       - Вес оружия (кг)                                    │
│                                                                           │
└──────────────────────────────────────────────────────────────────────────┘
```

### Режимы огня (FireModes)

| Оружие | Режимы огня |
|--------|-------------|
| АК-74М | Single, Auto |
| АК-103 | Single, Auto |
| СВД | Single |
| MP5SD | Single, Burst, Auto |
| MP7A2 | Single, Auto |
| Glock 17 | Single |
| M9A3 | Single |

### Weapon Degradation (Износ оружия)

```
┌──────────────────────────────────────────────────────────────────┐
│ WEAPON DURABILITY: 100% ──────────────────────────────────► 0%   │
├──────────────────────────────────────────────────────────────────┤
│ 100-75%  │ Full performance                                      │
│  75-50%  │ -10% accuracy, occasional jam (5%)                    │
│  50-25%  │ -20% accuracy, frequent jam (15%), -10% damage        │
│  25-10%  │ -35% accuracy, constant jam (30%), -25% damage        │
│  10-0%   │ BROKEN - Cannot fire, must repair                     │
└──────────────────────────────────────────────────────────────────┘
```

---

## Ammo System (Система патронов)

### Калибр 5.45x39mm (для АК-74М)

На основе `SuspenseCoreAmmoAttributes.json`:

| ID | Название | Урон | Пробитие | Фрагментация |
|----|----------|------|----------|--------------|
| `Ammo_545x39_PS` | 5.45x39 ПС гс | 42 | 25 | 40% |
| `Ammo_545x39_BP` | 5.45x39 БП | 37 | 45 | 17% |
| `Ammo_545x39_BS` | 5.45x39 БС | 40 | 57 | 15% |
| `Ammo_545x39_T` | 5.45x39 Т (трассер) | 40 | 20 | 25% |
| `Ammo_545x39_HP` | 5.45x39 HP (экспанс.) | 68 | 8 | 85% |

### Калибр 9x19mm (для Glock/M9A3/MP5SD)

| ID | Название | Урон | Пробитие | Фрагментация |
|----|----------|------|----------|--------------|
| `Ammo_9x19_PST` | 9x19 ПСТ гж | 50 | 18 | 15% |
| `Ammo_9x19_AP` | 9x19 AP 6.3 | 45 | 30 | 5% |
| `Ammo_9x19_RIP` | 9x19 RIP | 102 | 2 | 100% |
| `Ammo_9x19_Luger` | 9x19 Luger CCI | 55 | 10 | 20% |

### Атрибуты патронов

```cpp
// Каждый тип патрона влияет на:
BaseDamage           // Базовый урон
ArmorPenetration     // Пробитие брони (0-100)
StoppingPower        // Останавливающая сила
FragmentationChance  // Шанс фрагментации (доп. урон)
MuzzleVelocity       // Начальная скорость пули (м/с)
DragCoefficient      // Коэффициент сопротивления воздуха
EffectiveRange       // Эффективная дальность
AccuracyModifier     // Модификатор точности
RecoilModifier       // Модификатор отдачи
RicochetChance       // Шанс рикошета
TracerVisibility     // Видимость трассера (0.0-1.0)
IncendiaryDamage     // Зажигательный урон
WeaponDegradationRate // Скорость износа оружия
MisfireChance        // Шанс осечки
```

---

## UE 5.5 Optimization (Оптимизация)

### Nanite Configuration

```ini
; Config/DefaultEngine.ini

[/Script/Engine.RendererSettings]
; Nanite - для статической геометрии зданий
r.Nanite=1
r.Nanite.MaxPixelsPerEdge=1
r.Nanite.ViewMeshLODBias=0

; Virtual Shadow Maps
r.Shadow.Virtual.Enable=1
r.Shadow.Virtual.MaxPhysicalPages=2048
```

### Lumen Settings (для небольших карт)

```ini
; Lumen настройки
r.Lumen.TraceMeshSDFs=1
r.Lumen.ScreenProbeGather=1
r.LumenScene.SoftwareRayTracing=1

; Для интерьеров Hub
r.Lumen.Reflections.ScreenSpaceReconstruction=1
```

### HLOD Setup

```
Окраина - HLOD Setup (400x400м):
├── HLOD_0 (полная детализация):      0-50м
├── HLOD_1 (упрощённая геометрия):    50-150м
├── HLOD_2 (сильно упрощённая):       150-300м
└── HLOD_3 (силуэты/impostors):       300-400м

Что использует Nanite:
├── Здания (стены, крыши, полы)
├── Статичные объекты (машины, мусор, контейнеры)
├── Рельеф
└── Крупные пропсы

Что НЕ использует Nanite:
├── Интерактивные объекты (двери, лут-контейнеры)
├── Skeletal meshes (враги, NPC)
├── Мелкие детали с физикой
└── VFX / Particles
```

### Occlusion Culling

```cpp
// Project Settings -> Engine -> Rendering
// Важно для зданий с интерьерами

// В DefaultEngine.ini
[/Script/Engine.RendererSettings]
r.HZBOcclusion=1
r.AllowOcclusionQueries=1

// Precomputed Visibility Volumes
// Размещать в каждом здании для оптимизации interior culling
```

### Distance Culling по типам

| Тип объекта | Min Draw Distance | Max Draw Distance |
|-------------|-------------------|-------------------|
| Здания | 0 | Unlimited (Nanite) |
| Враги | 0 | 200м |
| Лут (мелкий) | 0 | 50м |
| Лут (крупный) | 0 | 100м |
| Decals | 0 | 30м |
| Particles | 0 | 100м |

### Memory Budget (Demo)

```
Target Memory Budget:
├── Hub:       ~500MB (всегда загружен)
├── Окраина:   ~1.5GB (стримится)
├── Промзона:  ~1.2GB (стримится)
└── Shared:    ~300MB (общие ассеты)

Total Peak: ~2.3GB (Hub + один рейд)
```

---

## Skill Progression System (GAS-Based)

### Архитектура навыков

```cpp
// Категории навыков (AttributeSet)
UPROPERTY() float CombatSkill;      // Боевые навыки
UPROPERTY() float SurvivalSkill;    // Выживание
UPROPERTY() float TechnicalSkill;   // Техника
UPROPERTY() float MobilitySkill;    // Мобильность
```

### Прокачка через использование

| Действие | Навык | XP за действие |
|----------|-------|----------------|
| Убийство врага | Combat | 10-50 (по типу) |
| Попадание в голову | Combat | +15 бонус |
| Использование аптечки | Survival | 5 |
| Найден тайник | Survival | 20 |
| Взлом замка | Technical | 15 |
| Ремонт оружия | Technical | 10 |
| Успешный спринт-побег | Mobility | 8 |
| Прыжок через препятствие | Mobility | 3 |

### Уровни навыков и бонусы

```
┌────────────────────────────────────────────────────────────────┐
│ COMBAT SKILL                                                    │
├────────────────────────────────────────────────────────────────┤
│ Lvl 1-10:   Base damage                                        │
│ Lvl 11-20:  +5% damage, -3% recoil                            │
│ Lvl 21-30:  +10% damage, -6% recoil, faster reload            │
│ Lvl 31-40:  +15% damage, -10% recoil, +10% crit chance        │
│ Lvl 41-50:  +20% damage, -15% recoil, +15% crit, elite perks  │
└────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────┐
│ SURVIVAL SKILL                                                  │
├────────────────────────────────────────────────────────────────┤
│ Lvl 1-10:   Base healing                                       │
│ Lvl 11-20:  +15% healing efficiency                            │
│ Lvl 21-30:  Slower stamina drain, холодоустойчивость           │
│ Lvl 31-40:  Detect nearby loot, bonus HP                       │
│ Lvl 41-50:  Second chance (once per raid)                      │
└────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────┐
│ TECHNICAL SKILL                                                 │
├────────────────────────────────────────────────────────────────┤
│ Lvl 1-10:   Basic repairs, отключение камер                    │
│ Lvl 11-20:  -20% repair cost, взлом простых замков             │
│ Lvl 21-30:  Hack terminals, отключение турелей                │
│ Lvl 31-40:  EMP crafting, перепрограммирование дронов         │
│ Lvl 41-50:  Disable security grids, взлом биометрии           │
└────────────────────────────────────────────────────────────────┘

┌────────────────────────────────────────────────────────────────┐
│ MOBILITY SKILL                                                  │
├────────────────────────────────────────────────────────────────┤
│ Lvl 1-10:   Base movement speed                                │
│ Lvl 11-20:  +5% sprint speed, quieter footsteps               │
│ Lvl 21-30:  +10% sprint, -15% stamina cost                    │
│ Lvl 31-40:  Slide ability, longer sprint duration             │
│ Lvl 41-50:  Wall climb, silent movement                       │
└────────────────────────────────────────────────────────────────┘
```

---

## Enemy Types (Типы врагов)

### Силы режима

#### Живые противники

| Тип | Оружие | HP | Поведение | Локации |
|-----|--------|----|-----------| ---------|
| **Полицейский (Смотритель)** | Pistol/SMG | 100 | Патрулирует парами, вызывает подкрепление | Окраина — везде |
| **Боец ОМОНа** | AK/Shotgun | 180 | Агрессивный, работает в группах | При тревоге, центральные зоны |
| **Охранник** | Pistol | 80 | Стоит на посту, может принять взятку | Промзона, КПП |
| **Оператор дронов** | SMG | 120 | Управляет дронами, уязвим | Редко, в укрытиях |

#### Автоматизированные системы

| Тип | Урон | HP/Прочность | Поведение | Локации |
|-----|------|--------------|-----------|---------|
| **Дрон-разведчик** | Нет (тревога) | 30 | Летает по маршруту, сканирует | Везде |
| **Робот-охранник** | Высокий (пулемёт) | 300 | Маршрутный патруль, неподкупен | Промзона |
| **Автотурель** | Средний | 150 | Неподвижна, 180° сектор обстрела | Промзона, входы |
| **Камера наблюдения** | Нет (тревога) | 20 | Стационарная, вращается | Везде |

#### Уровни полицейских (по тревоге)

| Уровень тревоги | Тип противников | Количество |
|-----------------|-----------------|------------|
| **Green** | Патрули Смотрительов (2 чел.) | 2-3 патруля |
| **Yellow** | + Дроны-разведчики | +2 дрона |
| **Orange** | + Усиленные патрули (3-4 чел.) | +2 патруля |
| **Red** | + Отряд ОМОНа (5-6 чел.) | +1 отряд |
| **Lockdown** | + Боевые роботы | +2 робота |

### AI Behavior (поведение ИИ)

```cpp
UENUM(BlueprintType)
enum class EEnemyBehavior : uint8
{
    Patrol,          // Ходит по точкам (Смотрительы, роботы)
    Guard,           // Стоит на посту, реагирует на звуки (охранники)
    Hunt,            // Активно ищет игрока (при тревоге)
    CallBackup,      // Вызывает подкрепление по рации
    Investigate,     // Идёт проверить подозрительный звук
    Suppress,        // Огонь на подавление (ОМОН)
    Scan             // Сканирует территорию (дроны, камеры)
};

// Реакция на игрока
// - Камера увидела → Yellow тревога через 3 сек если не уйти
// - Дрон засёк → Orange тревога, летит за игроком
// - Смотритель увидел → "Стоять!" + 2 сек на сдачу, потом огонь
// - Робот увидел → Немедленный огонь
// - Охранник увидел → Можно дать взятку (если хватает денег/репутации)
```

### Уязвимости противников

```
┌────────────────────────────────────────────────────────────────────────┐
│                    УЯЗВИМОСТИ ПО ТИПАМ                                  │
├────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ПОЛИЦЕЙСКИЙ:     Голова (x2.5), нет брони, уязвим к ЕМР               │
│  ОМОН:            Голова (x2.0), средняя броня, не уязвим к ЕМР        │
│  ОХРАННИК:        Голова (x3.0), может сдаться при низком HP           │
│                                                                         │
│  ДРОН:            ЕМР (мгновенное отключение), низкий HP                │
│  РОБОТ:           ЕМР (стан 5 сек), ноги (замедление), голова (x1.5)   │
│  ТУРЕЛЬ:          Блок питания (сзади), ЕМР (отключение 10 сек)        │
│  КАМЕРА:          Любой урон, ЕМР, можно отключить через терминал      │
│                                                                         │
└────────────────────────────────────────────────────────────────────────┘
```

---

## Item Degradation (Анти-абуз система)

### Degradation Types

| Item Type | Degrades By | Rate |
|-----------|-------------|------|
| Weapons | Shots fired | 0.05-0.15%/shot |
| Armor | Damage taken | 1% per 10 HP damage |
| Backpack | Weight carried | 0.1%/kg/minute |
| Tools | Uses | 5-10%/use |
| Medicine | Time (shelf life) | Expires after 5 raids |

### Repair Economy

```
Repair Cost Formula:
Cost = (MaxDurability - CurrentDurability) * BaseCost * QualityMultiplier

Quality Multipliers:
- Scrap:    0.5x cost, max repair to 60%
- Standard: 1.0x cost, max repair to 85%
- Premium:  2.0x cost, max repair to 100%
```

---

## Technical Implementation (GAS Integration)

### New Native Tags Needed

```cpp
namespace SuspenseCoreTags
{
    // Skills
    namespace Skill
    {
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Combat);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Survival);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Technical);   // Взлом, EMP, электроника
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Mobility);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Stealth);     // NEW: Скрытность
    }

    // Weapon States
    namespace Weapon
    {
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Jammed);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Broken);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Degraded);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Suppressed);  // NEW: Глушитель
    }

    // Alert System (NEW)
    namespace Alert
    {
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Green);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Yellow);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Orange);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Red);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Lockdown);
    }

    // Raid States
    namespace Raid
    {
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(InProgress);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Extracted);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Failed);
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Detected);    // NEW: Игрок обнаружен
    }

    // Enemy Types (NEW)
    namespace Enemy
    {
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Police);      // Смотритель
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(OMON);        // ОМОН
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Guard);       // Охранник
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Robot);       // Робот-охранник
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Drone);       // Дрон
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Turret);      // Турель
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Camera);      // Камера
    }

    // Locations
    namespace Location
    {
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Bunker);      // Бункер сопротивления
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Outskirts);   // Окраина сектора
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Industrial);  // Промзона
    }

    // Security Systems (NEW)
    namespace Security
    {
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Disabled);    // Система отключена
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(Hacked);      // Система взломана
        UE_DECLARE_GAMEPLAY_TAG_EXTERN(EMPStunned);  // Оглушена EMP
    }
}
```

### Raid Manager

```cpp
UCLASS()
class ARaidGameMode : public AGameModeBase
{
    GENERATED_BODY()

public:
    // Время рейда
    UPROPERTY(EditDefaultsOnly, Category = "Raid")
    float MaxRaidTime = 1800.0f;  // 30 минут

    // Текущее время
    UPROPERTY(BlueprintReadOnly, Category = "Raid")
    float CurrentRaidTime = 0.0f;

    // Активные точки эвакуации
    UPROPERTY(BlueprintReadOnly, Category = "Raid")
    TArray<AExtractionPoint*> ActiveExtractionPoints;

    // Активные задания
    UPROPERTY(BlueprintReadOnly, Category = "Raid")
    TArray<FRaidObjective> ActiveObjectives;

    UFUNCTION(BlueprintCallable, Category = "Raid")
    void StartRaid(ERaidLocation Location);

    UFUNCTION(BlueprintCallable, Category = "Raid")
    void EndRaid(bool bExtracted);

    UFUNCTION(BlueprintCallable, Category = "Raid")
    void PlayerDied();
};
```

---

## MVP Scope (Demo Version)

### Phase 1: Core Systems

| Задача | Статус | Приоритет |
|--------|--------|-----------|
| Бункер сопротивления (L_Hub_Bunker) | TODO | P0 |
| Level Streaming setup | TODO | P0 |
| Окраина Level (L_Raid_Outskirts) | TODO | P0 |
| Spawn/Extraction system | TODO | P0 |
| Basic AI (Полицейский-Смотритель) | TODO | P0 |
| Alert system (уровни тревоги) | TODO | P0 |
| Raid timer | TODO | P1 |

### Phase 2: Gameplay & Security Systems

| Задача | Статус | Приоритет |
|--------|--------|-----------|
| Loot spawns на Окраине | TODO | P0 |
| Камеры наблюдения (базовый ИИ) | TODO | P0 |
| Дроны-разведчики | TODO | P1 |
| Полицейские патрули (пары) | TODO | P1 |
| Weapon durability | TODO | P1 |
| Basic objectives (диверсии) | TODO | P1 |
| Death/Extraction flow | TODO | P0 |

### Phase 3: Industrial & Automation

| Задача | Статус | Приоритет |
|--------|--------|-----------|
| Промзона Level (L_Raid_Industrial) | TODO | P2 |
| Роботы-охранники | TODO | P2 |
| Автотурели | TODO | P2 |
| Система отключения питания | TODO | P2 |
| Vertical gameplay | TODO | P2 |
| Барахольщик NPC в бункере | TODO | P2 |

### Level Checklist

```
L_Hub_Bunker (Бункер сопротивления):
├── [ ] Blockout (100x100м interior)
├── [ ] Схрон (Stash) interaction point
├── [ ] Верстак interaction point
├── [ ] Оперативная карта UI trigger
├── [ ] Шлюз выхода (Deploy zone)
├── [ ] Мониторы с камерами секторов (декор)
├── [ ] Baked lighting (приглушённое, аварийное)
└── [ ] Nav mesh

L_Raid_Outskirts (Окраина сектора):
├── [ ] Blockout (400x400м)
├── [ ] 8 POI buildings (blockout)
├── [ ] 2 Spawn points (канализация, чердак)
├── [ ] 2 Extraction points (мусоровоз, КПП)
├── [ ] Камеры наблюдения (x15+)
├── [ ] Patrol routes для полиции (x3)
├── [ ] Drone flight paths (x2)
├── [ ] Loot spawn points (x50+)
├── [ ] Nav mesh
├── [ ] HLOD setup
├── [ ] Nanite meshes
└── [ ] Occlusion volumes
```

---

*Document Version: 4.0*
*Created: 2025-12-27*
*Updated: 2026-01-02 — Переработка сеттинга: технократическая дистопия в стиле Half-Life 2 + постсоветская альтернативная реальность*

**Ключевые изменения v4.0:**
- Новый сеттинг: "Почтовый-47" — закрытый город под контролем режима
- Убраны мутанты и аномалии
- Добавлены силы режима: полиция (Смотрительы), ОМОН, охранники
- Добавлены автоматизированные системы: дроны, роботы, турели, камеры
- Система тревоги (Alert System) с 5 уровнями
- Hub переименован в "Бункер сопротивления"
- Обновлён движок до UE 5.7

*Architecture: SuspenseCore GAS + EventBus*
*Engine: Unreal Engine 5.7 (No World Partition)*
*Data Sources: SuspenseCoreWeaponAttributes.json, SuspenseCoreAmmoAttributes.json, SuspenseCoreLoadoutSettings.h*
*Вдохновение: Half-Life 2, Escape from Tarkov, S.T.A.L.K.E.R.*
